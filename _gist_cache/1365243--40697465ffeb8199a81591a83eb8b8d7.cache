class ManagementReportView extends MIBaseView
  initialize: (options) ->    
    options.vent.bind("reportbusinessunitview:unload", @onClose)
    options.vent.bind("reportbusinessunitview:load", @load)
    @vent = options.vent    

  load: (businessUnits) =>
    @collection = businessUnits
    @collection.bind 'reset', @render
    @collection.fetch()

  onClose: =>    
    @collection.unbind('reset') if @collection
    @disposeViews()

  render: =>
    self = @

    @collection.each (item, counter) ->
      self.renderView(self.el, 'append', new ReportBusinessUnitView(model: item, vent: self.vent))